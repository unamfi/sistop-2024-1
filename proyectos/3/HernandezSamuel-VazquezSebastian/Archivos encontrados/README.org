#+title: Proyecto 2: (Micro) sistema de archivos

#+BEGIN_SRC yaml
Planteamiento: 2023.11.14
Entrega: 2023.11.23
#+END_SRC

# Â¡Las [[./calificaciones.org][calificaciones y comentarios]] ya estÃ¡n disponibles!

** DescripciÃ³n del proyecto

Para la unidad de sistemas de archivos, creo que resulta natural que
el proyecto sea implementar un sistema de archivos ğŸ˜‰ Para esto, lo
harÃ¡n trabajando sobre una /especificaciÃ³n/ y sobre un /caso de
referencia/.

** Â¿QuÃ© tengo que hacer?

Lo que ustedes deben desarrollar es un programa que pueda obtener,
crear y modificar informaciÃ³n en el micro-sistema-de-archivos de la
Facultad de IngenierÃ­a, =FiUnamFS=.

Siguiendo la especificaciÃ³n que aparece en la siguiente secciÃ³n,
tienen que desarrollar un programa que pueda:

1. Listar los contenidos del directorio
2. Copiar uno de los archivos de dentro del =FiUnamFS= hacia tu sistema
3. Copiar un archivo de tu computadora hacia tu =FiUnamFS=
4. Eliminar un archivo del =FiUnamFS=
5. Desafortunadamente, este sistema de archivos /simplote/ es muy dado
   a la fragmentaciÃ³n externa. Generen tambiÃ©n un programa que
   /desfragmente/ al =FiUnamFS=. Ojo, la defragmentaciÃ³n debe hacerse
   /dentro del sistema de archivos/ (no creando un sistema de archivos
   nuevo y copiando hacia Ã©ste).

*** Sistema muestra

Para verificar su implementaciÃ³n, pueden [[./fiunamfs.img][descargar un sistema de
archivos ejemplo]] que cumple con el planteamiento. Verifiquen que
pueden realizar todas las tareas que les solicitÃ© con Ã©ste. IndÃ­quenme
â€” Â¿CuÃ¡les son los contenidos del /Â«discoÂ»/?

** EspecificaciÃ³n de =FiUnamFS=

- El sistema de archivos cabe en un /diskette/ tradicional. Claro, no
  espero que tengan acceso al hardware, por lo que lo simularemos
  representÃ¡ndolo en un archivo de longitud fija, de 1440 Kilobytes
- Por simplicidad, en todas las estructuras de FIUnamFS, las cadenas
  de texto deben ser ASCII 8-bit (/no/ Unicode UTF-8).
- En las estructuras del disco, todos los enteros serÃ¡n representados
  como valores de 32 bits, en formato /little endian/.
  - Esto es, por ejemplo: El valor =1354= se representarÃ¡ como los
    bytes =(74, 5, 0, 0)= (porque =((0 * 256 + 0) * 256 + 5) * 256 +
    74 = 1354=). El valor =1234567890= se representarÃ¡ como los bytes
    =210, 2, 150, 7= (porque =((7 * 256 + 150) * 256 + 2) * 256 + 210
    = 1234567890=.
  - Para hacer las conversiones desde o hacia este formato, les
    sugiero usar el formato =<I= con las funciones =pack()= y
    =unpack()=, disponibles en distintos lenguajes ([[https://docs.python.org/3/library/struct.html][Python:
    struct.pack()]], [[https://ruby-doc.com/core/Array.html#method-i-pack][Ruby: Array#pack()]], [[https://perldoc.perl.org/perlpacktut][Perl: pack()]], [[https://www.php.net/manual/en/function.pack.php][PHP: pack()]], hay
    varias biblitecas que pueden usar para Javascript, como
    [[https://github.com/pgriess/node-jspack][node-jspack]] o [[https://github.com/ryanrolds/bufferpack][bufferpack]]). Si van a usar C o C++, les sugiero
    revisar las funciones [[https://linux.die.net/man/3/htons][htons() y ntohs()]]. Â¿Java? Si bien no forman
    parte del lenguaje, pueden encontrar [[https://stackoverflow.com/questions/2675957/java-implementing-htonl#15547976][varias]] [[https://coderanch.com/t/366549/java/Java-equivilent-functions-htonl-ntohl][implementaciones]] de
    =htons()= y =ntohs()= en la red.
- La superficie del disco se divide en sectores de 256 bytes. Cada
  cluster mide cuatro sectores.
- El pseudodispositivo no maneja /tabla de particiones/, hospeda
  directamente un /volumen/ en la totalidad de su espacio.
- =FiUnamFS= maneja Ãºnicamente un /directorio plano/, no se consideran
  subdirectorios.
- *Â¡Tengo que verificar los siguientes valores!*

  El primer cluster (#0) del pseudodispositivo es el
  /superbloque/. Este contiene informaciÃ³n en los siguientes bytes:
  - 0--8 :: Para identificaciÃ³n, el nombre del sistema de
            archivos. Â¡Debes validar nunca modificar un sistema de
            archivos que no sea el correcto! Debe ser la cadena =FiUnamFS=.
  - 10--14 :: VersiÃ³n de la implementaciÃ³n. Estamos implementando la
    versiÃ³n =24.1= (como cadena, no como nÃºmero). Deben validar que el
    sistema de archivos a utilizar sea de esta versiÃ³n, para evitar la
    corrupciÃ³n de datos.
  - 20--39 :: Etiqueta del volumen
  - 40--44 :: TamaÃ±o del cluster en bytes
  - 45--49 :: NÃºmero de clusters que mide el directorio
  - 50--54 :: NÃºmero de clusters que mide la unidad completa
  El resto del superbloque puede quedar vacÃ­o (o puedes
  /sobrecargarlo/ con otros datos â€‰â€” No es importante para la
  implementaciÃ³n.
- El sistema de archivos es de /asignaciÃ³n contigua/. Toda la
  informaciÃ³n de los archivos estÃ¡ en el directorio.
- El directorio estÃ¡ ubicado en los clusters 1 a 4. Cada entrada del
  directorio mide 64 bytes, consistentes en:
  - 0 :: Tipo de archivo. Dado que el sistema de archivos actual no
    tien soporte para directorios, dispositivos, pipes, ni otros
    archivos especiales, todos los archivos tendrÃ¡n el caracter =-= (=0x2d=,
    =45=). Las entradas vacÃ­as tendrÃ¡n el caracter =/= ('0x0f', '47')
  - 1--15 :: Nombre del archivo
  - 16--20 :: TamaÃ±o del archivo, en bytes
  - 20--23 :: Cluster inicial
  - 24--37 :: Hora y fecha de creaciÃ³n del archivo, especificando
              AAAAMMDDHHMMSS (p.ej. '20221108182600' para 2022-11-08
	      18:26:00)
  - 38-51 :: Hora y fecha de Ãºltima modificaciÃ³n del archivo,
              especificando AAAAMMDDHHMMSS (p.ej. '20221109182600')
  - 52--64 :: Espacio no utilizado (Â¿reservado para expansiÃ³n futura?)
- Las entradas no utilizadas del directorio se identifican porque
  en el campo de nombre llevan la cadena =---------------=.
  - Los nombres de archivos pueden componerse de cualquier caracter
    dentro del subconjunto ASCII de 7 bits (no acentuados, no Unicode,
    sÃ³lo el /viejo y aburrido/ US-ASCII)
- Es un sistema de archivos plano â€” No maneja subdirectorios.
- DespuÃ©s del directorio, todo el espacio restante es espacio de
  datos.


** CalificaciÃ³n del proyecto

|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
|                          | *Excelente (100%)*                                                                                                                                                                                                                                                 | *Bueno (75%)*                                                                                                                                                   | *Suficiente (50%)*                                                                                                                                               | *Insuficiente (0%)*                                                                                                        | *Peso* |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Proyecto*               |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    30% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Cumplimiento/           | Se cumplen los cinco puntos planteados: Listar los contenidos, copiar un archivo de FiUNAMfs hacia tu equipo, copiar un archivo de tu equipo hacia FiUNAMfs, eliminar un archivo, desfragmentar el medio                                                           | Se cumplen cuatro de los objetivos                                                                                                                              | Se cumplen tres o dos de los objetivos                                                                                                                           | Se cumple uno solo de los objetivos o ninguno                                                                              |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Claridad de desarrollo/ | El cÃ³digo, acompaÃ±ado de la documentaciÃ³n, resultan de clara comprensiÃ³n, a pesar de cualquier nivel de complejidad que mantengan                                                                                                                                  | El cÃ³digo es ofuscado, dificil de seguir, pero la lectura de la documentaciÃ³n ayuda a hacerlo                                                                   | Es dificil comprender la forma en que se desarrollÃ³ incluso teniendo la documentaciÃ³n, o esta estÃ¡ incompleta y no cubre este aspecto                            | Imposible de comprender                                                                                                    |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Interfaz usuario/       | MÃ³dulo de FUSE, o interfaz grÃ¡fica/navegaciÃ³n textual que no requieren de ayuda para realizar las operaciones requeridas                                                                                                                                           | Interfaz grÃ¡fica / navegaciÃ³n textual que requiere comprender documentaciÃ³n; interfaz de lÃ­nea de comandos sencilla o natural                                   | La interfaz usuario es suficiente para presentar y manipular los datos, pero su uso requiere comprender el cÃ³digo fuente                                         | El programa es imposible de utilizar exitosamente sin conocer la implementaciÃ³n detalladamente                             |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Desarrollo*             |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    30% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Directorio de proyecto/ | El trabajo entregado consta exclusivamente del cÃ³digo fuente y la documentaciÃ³n, en una estructura acorde para su construcciÃ³n/compilaciÃ³n, evaluaciÃ³n y uso directo; en caso de requerirlo, un .gitignore mantiene limpio el directorio al compilar               | SÃ³lo el cÃ³digo fuente y la documentaciÃ³n forman parte de los commits, pero construir / ejecutar el cÃ³digo ensucia al repositorio (Â¿deberÃ­a manejar .gitignore?) | El trabajo entregado incluye archivos innecesarios (como archivos objeto ya compilados o subdirectorios generados por el entorno de desarrollo empleado          | No entregÃ³ usando Git                                                                                                      |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /CÃ³digo vÃ¡lido/          | Al ejecutar las instrucciones documentadas, el cÃ³digo puede ejecutarse exitosamente al primer intento                                                                                                                                                              | Las instrucciones que forman parte de la documentaciÃ³n tienen que adecuarse para poder ejecutar el cÃ³digo, o hay errores menores que corregir para que funcione | No estÃ¡ documentado cÃ³mo ejecutar el cÃ³digo, o hay errores mayores que corregir para poder ejecutarlo                                                            | ResultÃ³ imposible probar la ejecuciÃ³n                                                                                      |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Comentarios/            | El cÃ³digo estÃ¡ comentado donde hace falta, no repite informaciÃ³n obvia. Los comentarios ayudan a comprender la lÃ³gica, no la implementaciÃ³n                                                                                                                        | El cÃ³digo estÃ¡ comentado donde hace falta, pero los comentarios son excesivos: AdemÃ¡s de la lÃ³gica general, mencionan lo obvio                                  | Hay algunos comentarios Ãºtiles en el programa, pero falta mucho para que ayude a una buena comprensiÃ³n                                                           | No hay comentarios                                                                                                         |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Legibilidad*            |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    20% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| Estructura               | El cÃ³digo estÃ¡ bien organizado y emplea un estilo de indentaciÃ³n de forma consistente                                                                                                                                                                              | El cÃ³digo estÃ¡ mayormente indentado; hay inconsistencias menores                                                                                                | Falta claridad en los bloques por no emplear indentaciÃ³n o hacerlo de forma absolutamente inconsistente                                                          |                                                                                                                            |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| Nomenclatura             | Los nombres de los sÃ­mbolos (variables, funciones, mÃ©todos, clases) son claros y acorde a su funciÃ³n; los principales elementos estÃ¡n documentados expresamente                                                                                                    | Los nombres de los sÃ­mbolos mencionados son claros y acorde a su funciÃ³n, aunque no estÃ©n documentados                                                          | Los nombres de los sÃ­mbolos no son claros, pero su uso y significado forma parte de la documentaciÃ³n                                                             | Cuesta trabajo seguir la lÃ³gica; los sÃ­mbolos empleados no tienen nombres significativos, y su funciÃ³n no estÃ¡ documentada |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| *Entrega*                |                                                                                                                                                                                                                                                                    |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |    20% |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /DocumentaciÃ³n externa/  | Autores, estrategia, requisitos y explicaciÃ³n acerca del uso, ejemplos de uso                                                                                                                                                                                      |                                                                                                                                                                 |                                                                                                                                                                  |                                                                                                                            |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Entorno y dependencias/ | Presenta el entorno para el cual el programa fue escrito, detallando segÃºn sea pertinente lenguaje (incluyendo la implementaciÃ³n y versiÃ³n mayor), principales mÃ³dulos que deben ser instalados (con sus respectivas versiones), y demÃ¡s instrucciones pertinentes |                                                                                                                                                                 | Indica los principales componentes requeridos para la construcciÃ³n y ejecuciÃ³n del proyecto, pero omite detalles importantes que dificultan su exitosa ejecuciÃ³n |                                                                                                                            |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+--------|
| /Historia en Git/        | El proyecto consta de un mÃ­nimo de cinco commits, con informaciÃ³n suficientemente descriptiva para comprender el proceso de desarrollo                                                                                                                             | Consta de un mÃ­nimo de cinco commits, pero no presentan un tÃ­tulo/comentario suficiente para entender el proceso de desarrollo                                  | La entrega consta de un sÃ³lo commit, no permite entender el proceso de desarrollo del proyecto                                                                   | No entregÃ³ usando Git                                                                                                      |        |
|--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------‰PNG

   IHDR  K  ˆ   G©UÓ   sRGB ®Îé   bKGD ÿ ÿ ÿ ½§“   	pHYs  .#  .#x¥?v   tIMEç83K5:  € IDATxÚì}w˜eU•ıZûÜ÷ªºº«:UU‚†Œt7 "’•utETDGsuÅ4c AQ0   É š&HP1:Tuuªê
ïİ³×ïsï}¯º…–ùéÌÇùü°Cõ{÷sö9{¯½öÚ”„gÆ3ã™ñtØßûÏŒgÆÿàxÆÂŸÏŒÿËãf<3ş/g,ü™ñÌø¿<±ğgÆ3ãÿòxÆÂŸÏŒÿËãf<3ş/g,ürJ¢‚^şñz?õ?ğÍ*?YÁŸğ{Òß¶†ş·âpğ™Uùû|ò?&ˆ€D>™´iÃË_XL"(ˆLVo 8dbztD ‡²ò¯÷ñŒ…ÿŒ6+¯~)E’€IB2èOòœxrÓnéƒ#Ú rRP¶Ş·
`Š@xÆ=üÇÏXøß{V±®	§_¥•¡€Æê'’Ù§_‘|-¼ı@)L]ç5¸@¦‡